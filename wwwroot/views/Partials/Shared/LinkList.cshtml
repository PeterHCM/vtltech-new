@model IEnumerable<Umbraco.Cms.Core.Models.Link>
@using Microsoft.AspNetCore.Html
@{
    var defaultFileType = ViewData["fileType"] as string;
    string GetFileType(string url, string defaultType)
    {
        if (!string.IsNullOrWhiteSpace(defaultType))
        {
            return defaultType.ToLowerInvariant();
        }
        
        var extension = System.IO.Path.GetExtension(url)?.TrimStart('.').ToLowerInvariant();
        
        return extension switch
        {
            "pdf" => "pdf",
            "doc" or "docx" or "word"=> "doc",
            "xls" or "xlsx" => "excel",
            "ppt" or "pptx" => "powerpoint",
            "zip" or "rar" or "7z" => "archive",
            "arrowRight" => "arrowright",
            _ => "link" // Mặc định là link
        };
    }
    var PdfIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 text-red-600 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M12 6v6l4 2m4 2V8l-6-6H6a2 2 0 00-2 2v14a2 2 0 002 2h10"" />
    </svg>"
    );
    var DocIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 text-blue-600 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M7 3h8l4 4v12a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z"" />
    </svg>"
    );
    var ExcelIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 text-green-600 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M3 8h18M3 12h18M3 16h18M9 8v12M15 8v12"" />
    </svg>"
    );
    var PowerpointIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 text-orange-600 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M13 3a9 9 0 100 18v-6a3 3 0 100-6V3z"" />
    </svg>"
    );
    var ArchiveIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 text-yellow-600 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M3 7h18M5 7v10a2 2 0 002 2h10a2 2 0 002-2V7M9 11h6"" />
    </svg>"
    );
    var arrowRightIcon = new HtmlString(
    @"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
        <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M9 5l7 7-7 7"" />
    </svg>"
    );
    var LinkIcon = new HtmlString(
        $@"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-4 h-4 flex-shrink-0"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
            <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.881a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"" />
        </svg>"
    );
    Func<string, IHtmlContent> GetIcon = (type) => type switch
    {
        "pdf" => PdfIcon,
        "doc" or "word"=> DocIcon,
        "excel" => ExcelIcon,
        "powerpoint" => PowerpointIcon,
        "archive" => ArchiveIcon,
        "arrowright" => arrowRightIcon,
        _ => LinkIcon
    };
    var TargetIcon = new HtmlString(
        $@"<svg xmlns=""http://www.w3.org/2000/svg"" class=""w-3 h-3 ml-1"" fill=""none"" viewBox=""0 0 24 24"" stroke=""currentColor"" stroke-width=""2"">
            <path stroke-linecap=""round"" stroke-linejoin=""round"" d=""M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"" />
        </svg>"
    );
}
<ul class="space-y-3 mt-6">
    @foreach (var link in Model)
    {
        var url = link.Url;
        var name = link.Name;
        var target = link.Target;
        var type = GetFileType(url, defaultFileType);
        <li class="flex items-center gap-2">
            <a href="@url"
            target="@target"
            rel="@(target == "_blank" ? "noopener noreferrer" : null)"
            class="flex items-center gap-2 hover:text-primary transition-colors truncate">
                @GetIcon(type)
                <span class="truncate">@name</span>
                @if (target == "_blank")
                {
                    @TargetIcon
                }
            </a>
        </li>
    }
</ul>