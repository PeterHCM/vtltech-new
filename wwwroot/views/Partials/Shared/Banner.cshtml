@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Extensions

@{
    var currentPage = Model;
    var title = currentPage.Name;
    var description = currentPage.Value<string>("pageDescription");
    var ancestors = currentPage.Ancestors().Where(x => x.Level > 1).OrderBy(x => x.Level).ToList();
    var currentDomain = Context.Request.Host.Value;
    var currentCulture = Context.Features.Get<Microsoft.AspNetCore.Localization.IRequestCultureFeature>()?.RequestCulture.Culture.Name ?? "vi-VN";
    var isVietnamese = currentCulture == "vi-VN";
    var isIntranet = currentDomain.Contains("intranet");
    var image = currentPage.Value<IEnumerable<IPublishedContent>>("image")?.FirstOrDefault()?.Url();
    var imageUrl = image ?? "/media/wmld4zgl/vtl_eaton_mtl.png";
    var path = Context.Request.Path.Value?.ToLowerInvariant() ?? "";
    var isMinimalPage = path.Contains("/su-kien") || path.Contains("/events") || path.Contains("/landing");
}

@if (!isIntranet && !isMinimalPage)
{
    <section class="relative py-16 md:py-24 lg:py-32 bg-gray-950 overflow-hidden">
        <div class="absolute inset-0">
            @* Lớp overlay gradient thay vì chỉ đen để màu ảnh rực hơn *@
            <div class="absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent z-10"></div>
            <img src="@imageUrl" alt="Banner" class="w-full h-full object-cover" loading="lazy" />
            
            @* Thêm hiệu ứng đường kẻ công nghệ cho đúng chất VTL *@
            <div class="absolute inset-0 opacity-10 z-0 bg-[radial-gradient(#e06800_1px,transparent_1px)] [background-size:20px_20px]"></div>
        </div>

        <div class="relative z-20 mx-auto px-6 md:px-12 lg:px-24 max-w-7xl">
            <nav aria-label="Breadcrumb" class="mb-6">
                <ol class="flex flex-wrap items-center space-x-2 text-sm">
                    <li>
                        <a href="/" class="text-white/80 hover:text-[#e06800] transition duration-200">
                            @(isVietnamese ? "Trang chủ" : "Home")
                        </a>
                    </li>
                    @foreach (var ancestor in ancestors)
                    {
                        <li class="flex items-center space-x-2">
                            <span class="text-white/40">/</span>
                            <a href="@ancestor.Url()" class="text-white/80 hover:text-[#e06800] transition">@ancestor.Name</a>
                        </li>
                    }
                    <li class="flex items-center space-x-2">
                        <span class="text-white/40">/</span>
                        <span class="text-[#e06800] font-bold" aria-current="page">@title</span>
                    </li>
                </ol>
            </nav>

            @* Tiêu đề với điểm nhấn màu Cam VTL *@
            <div class="max-w-4xl">
                <h1 class="text-4xl md:text-6xl lg:text-7xl font-black text-white leading-tight uppercase tracking-tighter">
                    @title<span class="text-[#e06800]">.</span>
                </h1>

                @if (!string.IsNullOrWhiteSpace(description))
                {
                    <div class="mt-6 h-1 w-20 bg-[#006361]"></div> @* Thanh ngang màu Xanh *@
                    <p class="mt-6 text-lg md:text-xl text-gray-200 leading-relaxed font-medium">@description</p>
                }
            </div>
        </div>
    </section>
}
else if (!isMinimalPage)
{
    @* Giao diện Intranet: Tinh tế và chuyên nghiệp *@
    <div class="bg-white dark:bg-gray-950 border-b border-gray-100 dark:border-gray-800">
        <div class="mx-auto px-6 md:px-12 lg:px-24 max-w-7xl py-8">
            <nav aria-label="Breadcrumb" class="mb-4">
                <ol class="flex flex-wrap items-center space-x-2 text-xs uppercase tracking-widest font-bold">
                    <li>
                        <a href="/" class="text-gray-400 hover:text-[#006361] transition">@(isVietnamese ? "Trang chủ" : "Home")</a>
                    </li>
                    @foreach (var ancestor in ancestors)
                    {
                        <li class="flex items-center space-x-2">
                            <span class="text-gray-300">/</span>
                            <a href="@ancestor.Url()" class="text-gray-400 hover:text-[#006361]">@ancestor.Name</a>
                        </li>
                    }
                </ol>
            </nav>
            
            <h1 class="text-3xl md:text-4xl font-black text-gray-900 dark:text-white uppercase tracking-tighter">
                @title
            </h1>
            
            @if (!string.IsNullOrWhiteSpace(description))
            {
                <p class="mt-2 text-gray-500 dark:text-gray-400 border-l-4 border-[#e06800] pl-4 italic">@description</p>
            }
        </div>
    </div>
}