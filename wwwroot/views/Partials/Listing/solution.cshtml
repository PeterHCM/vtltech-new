@using Umbraco.Cms.Core.Models.PublishedContent
@using Umbraco.Extensions
@inject Umbraco.Cms.Web.Common.UmbracoHelper Umbraco
@model IEnumerable<IPublishedContent>

@{
    var viewMoreText = Umbraco?.GetDictionaryValue("viewMoreText") ?? "TÌM HIỂU GIẢI PHÁP";
}

<div class="grid grid-cols-1 md:grid-cols-2 gap-8 py-12">
    @foreach (var item in Model)
    {
        var title = item.Value<string>("title") ?? item.Name;
        var description = item.Value<string>("description");
        
        var imgMedia = item.Value<IEnumerable<IPublishedContent>>("image")?.FirstOrDefault();
        var imageUrl = imgMedia != null ? imgMedia.GetCropUrl(800, 450) : "/media/default/VTL_solution.jpg";
        var iconUrl = item.Value<IEnumerable<IPublishedContent>>("icon")?.FirstOrDefault()?.Url() ?? "/media/default/VTL_logo.svg";

        <article class="group relative flex flex-col md:flex-row h-full bg-white dark:bg-[#0a0a0b] border border-slate-200 dark:border-white/5 overflow-hidden transition-all duration-500 hover:border-primary/60">
            
            @* 1. Media Section: Chiếm 40% bề ngang trên Desktop *@
            <div class="relative w-full md:w-2/5 aspect-video md:aspect-auto overflow-hidden bg-slate-900">
                <img src="@imageUrl" alt="@title" class="w-full h-full object-cover opacity-60 group-hover:opacity-100 group-hover:scale-110 transition-all duration-1000" />
                
                @* Gradient phủ để hòa quyện với phần nội dung *@
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-white dark:to-[#0a0a0b] hidden md:block"></div>
                
                @* Hiệu ứng Scanner ngang (dành riêng cho Solution) *@
                <div class="absolute inset-y-0 left-0 w-[2px] bg-primary shadow-[0_0_20px_#3b82f6] z-10 opacity-0 group-hover:opacity-100 group-hover:animate-vtl-scan-right"></div>
            </div>

            @* 2. Content Section: Chiếm 60% *@
            <div class="w-full md:w-3/5 p-8 flex flex-col justify-center relative">
                @* Icon Giải pháp: Thiết kế dạng Neon Box *@
                <div class="mb-6 flex items-center gap-4">
                    <div class="w-12 h-12 flex items-center justify-center bg-primary/10 border border-primary/30 rounded-sm group-hover:shadow-[0_0_15px_rgba(59,130,246,0.5)] transition-all">
                        <img src="@iconUrl" alt="icon" class="w-7 h-7 object-contain dark:invert dark:brightness-200" />
                    </div>
                    <div class="h-[1px] flex-grow bg-gradient-to-r from-primary/50 to-transparent"></div>
                </div>

                <h3 class="text-xl md:text-2xl font-black uppercase tracking-tighter text-slate-900 dark:text-white mb-4 group-hover:text-primary transition-colors">
                    @title
                </h3>
                
                <p class="text-sm text-slate-500 dark:text-slate-400 line-clamp-3 mb-6 leading-relaxed">
                    @description
                </p>

                @* 3. Action Footer *@
                <a href="@item.Url()" class="inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] text-primary group/link">
                    @viewMoreText
                    <svg class="w-4 h-4 transform group-hover/link:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </a>
            </div>

            @* Trang trí kỹ thuật: Số thứ tự module giả lập *@
            <div class="absolute bottom-2 right-4 pointer-events-none">
                <span class="font-mono text-[40px] font-black text-slate-100 dark:text-white/[0.02] leading-none">0@(item.SortOrder + 1)</span>
            </div>
        </article>
    }
</div>

<style>
    @@keyframes vtl-scan-right {
        0% { left: 0%; opacity: 0; }
        50% { opacity: 1; }
        100% { left: 100%; opacity: 0; }
    }
    .animate-vtl-scan-right {
        animation: vtl-scan-right 3s ease-in-out infinite;
    }
</style>