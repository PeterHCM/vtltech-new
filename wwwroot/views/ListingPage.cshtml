@using Umbraco.Cms.Web.Common.PublishedModels;
@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Extensions
@inject IPublishedValueFallback PublishedValueFallback

@{
    Layout = "layout.cshtml";

    var pageTitle = Model.Name;
    var items = Model.Children()
        .Where(x => x.IsVisible(PublishedValueFallback) && !x.Value<bool>("naviHide"))
        .ToArray();

    string viewMoreText = Umbraco.GetDictionaryValue("viewMoreText") ?? "Xem chi tiết →";
    string noContentText = Umbraco.GetDictionaryValue("noContentText") ?? "Không có nội dung để hiển thị.";
}

<section class="max-w-5xl mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-primary mb-6">@pageTitle</h1>

    @if (items.Any())
    {
        <div class="grid gap-6 md:grid-cols-2">
            @foreach (var item in items)
            {
                var title = item.Name;
                var intro = item.Value<string>("introtext");

                <article class="bg-dark text-slogan p-6 rounded-lg shadow-3xl hover:shadow-xl transition-shadow duration-300">
                    <h2 class="text-xl font-semibold text-primary mb-2">@title</h2>

                    @if (!string.IsNullOrWhiteSpace(intro))
                    {
                        <p class="text-sm text-slogan leading-relaxed line-clamp-3  text-justify">
                            @intro
                        </p>
                    }

                    <a href="@item.Url()" class="inline-block mt-4 text-primary hover:underline text-sm font-medium">
                        @viewMoreText
                    </a>
                </article>
            }
        </div>
    }
    else
    {
        <p class="text-slogan">@noContentText</p>
    }
</section>
